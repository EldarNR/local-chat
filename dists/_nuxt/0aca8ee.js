(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{279:function(e,t,r){"use strict";var n=r(2),o=r(202).trim;n({target:"String",proto:!0,forced:r(280)("trim")},{trim:function(){return o(this)}})},280:function(e,t,r){"use strict";var n=r(86).PROPER,o=r(3),d=r(203);e.exports=function(e){return o((function(){return!!d[e]()||"​᠎"!=="​᠎"[e]()||n&&d[e].name!==e}))}},281:function(e,t,r){"use strict";r.r(t);r(110),r(201),r(48),r(279);var n={props:{username:{type:String,required:!0},id:{type:Number,required:!0}},data:function(){var e;return{newMessage:"",activeUserId:(null===(e=this.$store.getters.getActiveUser)||void 0===e?void 0:e.id)||null,messages:[]}},methods:{getChatKey:function(){return"chat_".concat(Math.min(this.id,this.activeUserId),"_").concat(Math.max(this.id,this.activeUserId))},loadMessages:function(){var e=this.getChatKey(),t=localStorage.getItem(e);return t?JSON.parse(t):[]},saveMessages:function(){var e=this.getChatKey();localStorage.setItem(e,JSON.stringify(this.messages))},sendMessage:function(){if(""!==this.newMessage.trim()){var e={sender:this.activeUserId,text:this.newMessage};this.messages.push(e),this.saveMessages(),this.newMessage=""}},updateMessages:function(e){var t=this.getChatKey();e.key===t&&(this.messages=JSON.parse(e.newValue))}},mounted:function(){this.activeUserId=this.$store.getters.getActiveUser.id,this.messages=this.loadMessages(),window.addEventListener("storage",this.updateMessages)},beforeDestroy:function(){window.removeEventListener("storage",this.updateMessages)},watch:{id:function(){this.activeUserId=this.$store.getters.getActiveUser.id,this.messages=this.loadMessages()}}},o=r(47),component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full h-dvh flex border-l-2 justify-between flex-col py-4 px-4"},[t("div",{staticClass:"overflow-auto"},[t("div",{staticClass:"flex justify-between mx-4"},[t("h3",{staticClass:"font-title text-lg mb-4"},[e._v("Чат")]),e._v(" "),t("h3",[e._v(e._s(e.username))])]),e._v(" "),t("div",{staticClass:"p-4 bg-neutral-100 h-dvh rounded-md overflow-y-auto space-y-4"},e._l(e.messages,(function(r,n){return t("div",{key:n,class:r.sender===e.activeUserId?"flex justify-end":"flex justify-start"},[t("div",{class:r.sender===e.activeUserId?" bg-neutral-200 border border-neutral-300 text-black p-3 rounded-md max-w-xs":"bg-neutral-50 border p-3 rounded-md max-w-xs"},[e._v("\n                    "+e._s(r.text)+"\n                ")])])})),0)]),e._v(" "),t("div",{staticClass:"my-4 flex float mx-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"flex-grow border rounded-md mr-2 ps-2",attrs:{type:"text",placeholder:"Сообщение..."},domProps:{value:e.newMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e._v(" "),t("button",{staticClass:"bg-primary rounded-md text-black h-[36px] w-[36px] flex items-center justify-center",on:{click:e.sendMessage}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[t("title",[e._v("send-circle")]),e._v(" "),t("path",{attrs:{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M8,7.71V11.05L15.14,12L8,12.95V16.29L18,12L8,7.71Z"}})])])])])}),[],!1,null,null,null);t.default=component.exports}}]);